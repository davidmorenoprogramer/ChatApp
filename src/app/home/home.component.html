<div class="chat-app-container">

    <div class="contactsAndMenu">
      <mat-toolbar  class="chat-header">
        <span class="apptitle">Chat App</span>
        <!-- Espacio flexible para alinear el contenido -->
        <div class="logout-button" >
          <button class="buttonconfig" [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu" class="mat-menu-panel">
              <button mat-menu-item>
                  <mat-icon class="icon">settings</mat-icon>
                  <span class="menuItemText">Settings</span>
              </button>
            <button mat-menu-item (click)="Logout()">
              <mat-icon class="icon">exit_to_app</mat-icon>
              <span class="menuItemText">Logout</span>
            </button>
          </mat-menu>
        </div>
      </mat-toolbar>
       <!-- search -->
      <mat-form-field class="search">
        <input matInput placeholder="buscar constactos" [formControl]="searchControl" [matAutocomplete]="users"/>
      </mat-form-field>
      <mat-autocomplete #users="matAutocomplete">
        <mat-option *ngFor="let user of users$ | async" (click)= "createChat(user)" >{{ user?.displayName }}</mat-option>
      </mat-autocomplete>

       <!-- Chats Activos-->
      <div class="scrollcontactos">
        <mat-list class="listaContactos">
          <div  *ngFor="let chat of myChats$ | async" class="contact-item" style="height: 40px;">
            <div>
              <mat-icon class="avatar">person</mat-icon>
            </div>
            <div class="messageColum">
              <div class="chat-info">
                <mat-card-title>{{ chat.chatName }}</mat-card-title>
                <mat-card-subtitle >{{ chat.lastMessageDate}}</mat-card-subtitle>
              </div>
            
              <p class="messageContact">{{ chat.lastMessage }}</p>
            </div>
          </div>
        </mat-list>

      </div>
      

    </div>
    <div class="chat-section">
      <!-- SecciÃ³n de chat -->
      <div class="chat-body">
        <div *ngIf="selectedContact">
          <!-- Mensajes recibidos -->
          <div class="message received" *ngFor="let message of receivedMessages">
            <div class="message-content">
              <span>{{ message }}</span>
            </div>
          </div>
          <!-- Mensajes enviados -->
          <div class="message sent" *ngFor="let message of sentMessages">
            <div class="message-content">
              <span>{{ message }}</span>
            </div>
          </div>
        </div>
        <div *ngIf="!selectedContact" class="no-contact-selected">
          Select a contact to start chatting
        </div>
      </div>
      <!-- Barra de entrada de mensaje -->
      <div class="chat-footer" *ngIf="selectedContact">
        <mat-form-field class="message-input" appearance="outline">
          <mat-label>Type a message</mat-label>
          <input matInput [(ngModel)]="message">
        </mat-form-field>
        <button mat-icon-button color="primary">
          <mat-icon>send</mat-icon>
        </button>
    </div>
  </div>
    
</div>
  